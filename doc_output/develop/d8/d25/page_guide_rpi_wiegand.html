<!-- HTML header for doxygen 1.8.17-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Leosac: Raspberry Pi 1 and Wiegand</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<!--<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
  DoxygenAwesomeDarkModeToggle.init()
</script>-->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Leosac
   &#160;<span id="projectnumber">0.8.0</span>
   </div>
   <div id="projectbrief">Open Source Access Control</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d8/d25/page_guide_rpi_wiegand.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Raspberry Pi 1 and Wiegand </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page describes how to set up a Raspberry 1 with a Wiegand reader, step by step. It is not the recommended approach in production but can be useful in lab for tests purpose. We recommend to use dedicated PCB hardware connected for the Raspberry Pi (or any other pico-pc) or to go with <a class="el" href="../../d5/d97/page_guide_rpi_piface_wiegand.html">Installation Guide (part 2): Raspberry Pi (1 B+ or 2 or 3 or 4) + Piface Digital (1 or 2) + Wiegand Reader</a></p>
<h1><a class="anchor" id="autotoc_md34"></a>
Informations</h1>
<p>General infos</p>
<ul>
<li>We use GPIO pins <em>14</em> and <em>15</em> for the Wiegand reader data transmission wires, respectfully for <em>Data0</em> and <em>Data1</em>.</li>
<li>We use GPIO pin <em>3</em> to light up the LED (meaning the door is open).</li>
<li>Wiegand reader <em>Data0</em> and <em>Data1</em> generally output +5V. Raspberry Pi's GPIO voltage levels are 3.3 V.</li>
<li>We need a total of 4 wires going to the Raspberry Pi's GPIOS. Last one is for <em>ground</em>.</li>
</ul>
<p>Here is the Raspberry Pi GPIO layout for informations: </p><div class="image">
<img src="../../raspberry-pi-rev2-gpio-pinout.jpg" alt=""/>
<div class="caption">
Raspberry pin-out</div></div>
   <h2><a class="anchor" id="autotoc_md35"></a>
Voltage Divider</h2>
<p>A Wiegand reader will usually use +5V as its "high" voltage level. However, Raspberry Pi's pins are built to deal with 3.3V current. Therefore we need to reduce the voltage in order to not damage the pins.</p>
<p>We want to go from +5V to about +3.3V: <code>Vin = +5</code> and we would like <code>Vout = +3.3</code>.</p>
<div class="image">
<img src="../../wiegand.png" alt=""/>
<div class="caption">
Wiegand Wiring</div></div>
   <p>The values on the resistors are not strictly fixed. As long as the ratio between the upper and lower resistor value is 1/2 for the <a href="http://en.wikipedia.org/wiki/Voltage_divider">voltage divider</a>, the 5k resistor can be safely replaced with another in the range from 2k to 10k depending on what you have. If you only have 10k resistors, you could even put 2 in series to obtain 20k.</p>
<p>Do not forget to plug the reader on a 12V current source. 5V is also suitable with some readers if you don't have another choice but is less recommended.</p>
<h1><a class="anchor" id="autotoc_md36"></a>
DIY Guide</h1>
<h2><a class="anchor" id="autotoc_md37"></a>
Step 1: Prepare the GPIOs</h2>
<p>Raspberry Pi with wires connected to GPIO.</p>
<div class="image">
<img src="../../wiegand_voltdivider1.jpg" alt=""/>
<div class="caption">
Raspberry Pi GPIOs</div></div>
   <ul>
<li>The black wire is connected to the <em>ground</em> GPIO pin.</li>
<li>The blue wire goes to GPIO 3.</li>
<li>The green wire is connected to GPIO 14.</li>
<li>The white wire is connected to GPIO 15.</li>
</ul>
<h2><a class="anchor" id="autotoc_md38"></a>
Step 2: Prepare the breadboard</h2>
<p>We will use 2 resistors type: <code>R1 = 330</code> and <code>R2 = 560</code>. This gives <code>Vout = 3.146</code>, which is acceptable.</p>
<p>This is what the breadboard look like, with 4 resistors for voltage divider. The led will be lighted if an access control is successful. </p><div class="image">
<img src="../../wiegand_voltdivider2.jpg" alt=""/>
<div class="caption">
Breadboard</div></div>
   <h2><a class="anchor" id="autotoc_md39"></a>
Step 3: The wiegand reader</h2>
<div class="image">
<img src="../../wiegand_voltdivider3.jpg" alt=""/>
<div class="caption">
Wiegand reader</div></div>
   <ul>
<li>The blue, yellow and orange wires are useless, as far as i know.</li>
<li>The red wire is for powering the reader. (Based on your reader, it can range from 5V to 12V &ndash; maybe more)</li>
<li>The green wire is <em>Data0</em> (aka <em>data -</em>)</li>
<li>The white wire is <em>Data1</em> (aka <em>data +</em>)</li>
<li>No color wire is a ground that needs to be connected to the raspi's ground.</li>
</ul>
<p>The reader could be powered by the Raspi's 5V pin, but we use an external powering source.</p>
<h2><a class="anchor" id="autotoc_md40"></a>
Step 4: Plug in the raspi's wires into the board</h2>
<p>We then plug the raspberry pi's wire (connected to the GPIOs) into the board. This will allow us to retrieve data from the reader as well as powering the led when we need to. </p><div class="image">
<img src="../../wiegand_voltdivider4.jpg" alt=""/>
<div class="caption">
Plug Raspberry with Breadboard</div></div>
   <h2><a class="anchor" id="autotoc_md41"></a>
Step 5: Plug the reader into the board</h2>
<div class="image">
<img src="../../wiegand_voltdivider5.jpg" alt=""/>
<div class="caption">
Plug Reader with Breadboard</div></div>
   <p>You're done for the hardware setup. If <a class="el" href="../../d6/d58/namespaceLeosac.html" title="This is the header file for a generated source file, GitSHA1.cpp.">Leosac</a> is already <a class="el" href="../../df/d1a/page_guide_raspbian.html#install_guide">installed</a>, you can now setup the <a class="el" href="../../da/d7f/page_module_sysfs_gpio.html">Module: SysFS GPIO</a> and <a class="el" href="../../d2/d23/page_module_wiegand.html">Module: Wiegand</a>.</p>
<h1><a class="anchor" id="autotoc_md42"></a>
Better Prototyping</h1>
<p>You may want to use <em>74LVC244</em> / <em>74LVC245</em> or <em>CD4049</em> / <em>CD4050</em> CMOS devices instead to convert 5V signal to 3.3V in a more professional way.</p>
<p>When working with a breadboard you may even want to use <em>Level-Shifter 8-Channel</em> (or 4 channel, just be sure input is 5V and output 3.3V). </p><div class="image">
<img src="../../level-shifter-8-channels-bi-directionnal.jpg" alt=""/>
<div class="caption">
Level-Shifter 8-Channel</div></div>
    </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d0/d30/page_guides.html">Guides</a></li>
    <li class="footer">Generated on Tue Mar 22 2022 10:51:49 for Leosac by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
