<!-- HTML header for doxygen 1.8.17-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Leosac: Module: Wiegand</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<!--<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
  DoxygenAwesomeDarkModeToggle.init()
</script>-->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Leosac
   &#160;<span id="projectnumber">0.8.0</span>
   </div>
   <div id="projectbrief">Open Source Access Control</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d2/d23/page_module_wiegand.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Module: Wiegand </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#mod_wiegand_main">Wiegand Module Documentation</a></li>
<li class="level1"><a href="#mod_wiegand_intro">Introduction</a></li>
<li class="level1"><a href="#mod_wiegand_user_config">Configuration Options</a><ul><li class="level2"><a href="#mod_wiegand_example">Example</a></li>
</ul>
</li>
<li class="level1"><a href="#mod_wiegand_wiring">Wiegand Wiring</a></li>
<li class="level1"><a href="#mod_wiegand_notes">Notes</a></li>
</ul>
</div>
<div class="textblock"><p>Explains how to configure the module to work with various Wiegand reader.</p>
<h1><a class="anchor" id="mod_wiegand_main"></a>
Wiegand Module Documentation</h1>
<h1><a class="anchor" id="mod_wiegand_intro"></a>
Introduction</h1>
<p>This module provides support for Wiegand devices. Simply put, it listens to GPIO event, gather them, and generate Wiegand events. It supports multiple readers.</p>
<p>As this is an module that provide an authentication source (by reading card ids or PIN code, or both), it shall conforms to <a class="el" href="../../d6/d00/page_auth.html#auth_specc">those specifications</a> regarding message passing.</p>
<p>There are multiple mode supported by the wiegand module. They allows the module to read from differently configured hardware, and allows you to chose what kind of credentials the module shall generate.</p>
<h1><a class="anchor" id="mod_wiegand_user_config"></a>
Configuration Options</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Options </th><th class="markdownTableHeadNone">Options </th><th class="markdownTableHeadNone">Options </th><th class="markdownTableHeadNone">Description </th><th class="markdownTableHeadNone">Mandatory  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">use_database </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">If true, use the database for config. Ignore other options </td><td class="markdownTableBodyNone">NO (defaults to false)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">readers </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Lists of all configured readers </td><td class="markdownTableBodyNone">YES  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&mdash;&gt; </td><td class="markdownTableBodyNone">reader </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">Configuration of 1 wiegand reader </td><td class="markdownTableBodyNone">YES  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">&mdash;&gt; </td><td class="markdownTableBodyNone">&mdash;&gt; </td><td class="markdownTableBodyNone">name </td><td class="markdownTableBodyNone">device name </td><td class="markdownTableBodyNone">YES  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&mdash;&gt; </td><td class="markdownTableBodyNone">&mdash;&gt; </td><td class="markdownTableBodyNone">high </td><td class="markdownTableBodyNone">name of the input GPIO that sends "high" data </td><td class="markdownTableBodyNone">YES  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">&mdash;&gt; </td><td class="markdownTableBodyNone">&mdash;&gt; </td><td class="markdownTableBodyNone">low </td><td class="markdownTableBodyNone">name of the input GPIO that sends "low" data </td><td class="markdownTableBodyNone">YES  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&mdash;&gt; </td><td class="markdownTableBodyNone">&mdash;&gt; </td><td class="markdownTableBodyNone">green_led </td><td class="markdownTableBodyNone">name of the green led device attached to the reader </td><td class="markdownTableBodyNone">NO  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">&mdash;&gt; </td><td class="markdownTableBodyNone">&mdash;&gt; </td><td class="markdownTableBodyNone">buzzer </td><td class="markdownTableBodyNone">name of the buzzer device attached to the reader </td><td class="markdownTableBodyNone">NO  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&mdash;&gt; </td><td class="markdownTableBodyNone">&mdash;&gt; </td><td class="markdownTableBodyNone">mode </td><td class="markdownTableBodyNone">Which mode the reader is using (see below) </td><td class="markdownTableBodyNone">NO (defaults to <code>SIMPLE_WIEGAND</code>)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">&mdash;&gt; </td><td class="markdownTableBodyNone">&mdash;&gt; </td><td class="markdownTableBodyNone">pin_timeout </td><td class="markdownTableBodyNone">Timeout when reading a PIN code. </td><td class="markdownTableBodyNone">NO (defaults to 2500ms)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&mdash;&gt; </td><td class="markdownTableBodyNone">&mdash;&gt; </td><td class="markdownTableBodyNone">pin_key_end </td><td class="markdownTableBodyNone">Which key is used to signal the end of a PIN code </td><td class="markdownTableBodyNone">NO (defaults to '#')  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">&mdash;&gt; </td><td class="markdownTableBodyNone">&mdash;&gt; </td><td class="markdownTableBodyNone">nowait </td><td class="markdownTableBodyNone">Don't wait for pin code after card read </td><td class="markdownTableBodyNone">NO (defaults to 0)  </td></tr>
</table>
<p><b>Note</b>: <code>high</code>, <code>low</code>, <code>green_led</code> and <code>buzzer</code> must be name of GPIO object: either defined using the sysfsgpio or pifacedigital module.</p>
<p>There are multiples <code>mode</code> available for a reader:</p><ol type="1">
<li><code>SIMPLE_WIEGAND</code> is for simply reading a wiegand card.</li>
<li><code>WIEGAND_PIN_4BITS</code> for reading a PIN code, when the reader send 4 bits per key pressed.</li>
<li><code>WIEGAND_PIN_8BITS</code> for reading a PIN code, when the reader send 8 bits per key pressed.</li>
<li><code>WIEGAND_PIN_BUFFERED</code> for reading a PIN code when the reader buffers up to 5key and send them in a 26 bits wiegand frame. Note that in this mode, the <code>pin_key_end</code> and <code>pin_timeout</code> parameter have no effect.</li>
<li><code>WIEGAND_CARD_PIN_4BITS</code> reads a card number followed by a PIN code read in 4bits mode.</li>
<li><code>WIEGAND_CARD_PIN_8BITS</code> reads a card number followed by a PIN code read in 8bits mode.</li>
<li><code>WIEGAND_CARD_PIN_BUFFERED</code> reads a card number followed by a PIN code read in buffered mode.</li>
<li><code>AUTODETECT</code> allows the module to read and create different type of credentials. It can read a pin code or a card number, or both. The pin code can be read if the reader is either in 4 bits or 8 bits mode. If you are doing card-only authentication, note that you will notice a delay of ~2 second, unless nowait is set to true. This delay is here to let the user have a chance to enter his PIN code.</li>
</ol>
<dl class="section warning"><dt>Warning</dt><dd>The <code>AUTODETECT</code> mode is not compatible with the hardware Wiegand-Buffered mode.</dd></dl>
<p>You can see <a class="el" href="../../d6/d00/page_auth.html#auth_data_type">this</a> for more the message passing specific specification about those modes. Note that multiple mode share a common message implementation.</p>
<p>Additional informations:</p><ul>
<li><code>pin_timeout</code> is the number of milliseconds (defaults to 2000) of inactivity on the keypad before considering the PIN code complete and sending it for processing. It's also the delay you have to enter your PIN after swiping your card.</li>
<li><code>pin_key_end</code> is the key to press to signal the end of the pin (default to '#'). This key wont be appended to the PIN code.</li>
<li>You can either type your PIN and wait, and type your PIN and the <code>pin_key_end</code>.</li>
</ul>
<h2><a class="anchor" id="mod_wiegand_example"></a>
Example</h2>
<p>This is a example of configuration for the Wiegand module.</p>
<div class="fragment"><div class="line">&lt;<span class="keywordtype">module</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">name</span>&gt;<span class="keyword">WIEGAND_READER</span>&lt;/<span class="keywordtype">name</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">file</span>&gt;<span class="keyword">libwiegand.so</span>&lt;/<span class="keywordtype">file</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">level</span>&gt;5&lt;/<span class="keywordtype">level</span>&gt;</div>
<div class="line">    &lt;<span class="keywordtype">module_config</span>&gt;</div>
<div class="line">        &lt;<span class="keywordtype">readers</span>&gt;</div>
<div class="line">            &lt;<span class="keywordtype">reader</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">name</span>&gt;<span class="keyword">MY_WIEGAND_1</span>&lt;/<span class="keywordtype">name</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">high</span>&gt;<span class="keyword">wiegand_data_high</span>&lt;/<span class="keywordtype">high</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">low</span>&gt;<span class="keyword">wiegand_data_low</span>&lt;/<span class="keywordtype">low</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">green_led</span>&gt;<span class="keyword">WIEGAND1_GREEN_LED</span>&lt;/<span class="keywordtype">green_led</span>&gt;</div>
<div class="line">                &lt;<span class="keywordtype">buzzer</span>&gt;<span class="keyword">WIEGAND1_BUZZER</span>&lt;/<span class="keywordtype">buzzer</span>&gt;</div>
<div class="line">            &lt;/<span class="keywordtype">reader</span>&gt;</div>
<div class="line">        &lt;/<span class="keywordtype">readers</span>&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">module_config</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">module</span>&gt;</div>
</div><!-- fragment --><h1><a class="anchor" id="mod_wiegand_wiring"></a>
Wiegand Wiring</h1>
<div class="image">
<img src="../../wiegand.png" alt=""/>
<div class="caption">
Wiegand Wiring</div></div>
   <p>The values on the resistors are not strictly fixed. As long as the ratio between the upper and lower resistor value is 1/2 for the <a href="http://en.wikipedia.org/wiki/Voltage_divider">voltage divider</a>, the 5k resistor can be safely replaced with another in the range from 2k to 10k depending on what you have. If you only have 10k resistors, you could even put 2 in series to obtain 20k.</p>
<p>Do not forget to plug the reader on a 12V current source. 5V is also suitable with some readers if you don't have another choice but is less recommended.</p>
<h1><a class="anchor" id="mod_wiegand_notes"></a>
Notes</h1>
<p>Technical implementations details can be found <a class="el" href="../../da/df1/namespaceLeosac_1_1Module_1_1Wiegand.html">here</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d0/d30/page_guides.html">Guides</a></li><li class="navelem"><a class="el" href="../../d8/d25/page_guide_rpi_wiegand.html">Raspberry Pi and Wiegand</a></li>
    <li class="footer">Generated on Sat Mar 5 2022 15:17:42 for Leosac by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
